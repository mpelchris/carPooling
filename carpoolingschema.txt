CREATE TABLE `carpooling`.`users` 
(
  `userID` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `cellphone` VARCHAR(45) NOT NULL,
  `firstname` VARCHAR(45) NOT NULL,
  `lastname` VARCHAR(45) NOT NULL,
  `birthdate` DATE NOT NULL,
 PRIMARY KEY (`userID`),
 UNIQUE INDEX `username_UNIQUE` (`username` ASC) VISIBLE
);

CREATE TABLE `carpooling`.`trips` 
(
  `tripID` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME NOT NULL,
  `origin` VARCHAR(45) NOT NULL,
  `destination` VARCHAR(45) NOT NULL,
  `totalSeats` INT NOT NULL,
  `availableSeats` INT NOT NULL,
  `cost` DOUBLE NOT NULL,
  PRIMARY KEY (`tripID`)
);

CREATE TABLE `carpooling`.`user_trip` (
  `tripID` INT NOT NULL,
  `userID` INT NOT NULL,
  `userID_1` INT NULL,
  `userID_2` INT NULL,
  `userID_3` INT NULL,
  `userID_4` INT NULL,
  PRIMARY KEY (`tripID`, `userID`),
  INDEX `userIdPKFK_idx` (`userID` ASC) VISIBLE,
  CONSTRAINT `tripIdPKFK`
    FOREIGN KEY (`tripID`)
    REFERENCES `carpooling`.`trips` (`tripID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `userIdPKFK`
    FOREIGN KEY (`userID`)
    REFERENCES `carpooling`.`users` (`userID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE);
